<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./output.css" />
  </head>
  <body>
    <main id="main" class="bg-zinc-100 flex flex-col min-h-screen">
      <div class="bg-white mx-auto p-10 w-[450px] mt-10">
        <h1 class="text-3xl font-bold font-serif flex justify-center mb-3">
          List Builder App
        </h1>

        <div class="flex">
          <input
            id="input"
            class="flex-grow focus-visible:outline-none border border-zinc-700 px-2"
            type="text"
          />
          <button
            id="addBtn"
            class="bg-zinc-700 text-white p-3 hover:bg-zinc-500"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-4 h-4"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M12 4.5v15m7.5-7.5h-15"
              />
            </svg>
          </button>
        </div>

        <div class="flex justify-between mt-5">
          <p class="font-bold text-md">Your List</p>

          <p
            class="font-bold bg-zinc-700 rounded-full px-3 py-2 text-white text-sm"
          >
            Done(<span id="totalCount"> 0 </span>/<span id="count"> 0 </span>)
          </p>
        </div>

        <!-- <div id="lists"></div> -->
        <div id="dd">
          <div class="pice flex mt-3 justify-center">
            <div class="justify-center">
              <img width="150" src="../empty-stage.svg" alt="" />
              <p class="flex justify-center">There is no list</p>
            </div>
          </div>
        </div>
      </div>

      <template id="templateUi">
        <div  class="check-list listItem p-3 flex justify-between mb-3 mt-5 border border-black items-center">
          <div class="flex gap-2">
              <input class="check" value="w-6 h-6" type="checkbox">
              <label class="textthrough " for="">${text}</label>
            </div>
      
           <div class="flex gap-3 ">
               <button class="edit-btn border border-zinc-700 p-2"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4  pointer-events-none">
                  <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                </svg>
                </button>
               <button class="deleBtn border border-zinc-700 p-2"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 pointer-events-none ">
                  <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                </svg>
                </button>
      
           </div>
      
      
           
      </div>
      </template>
    </main>

    <script>
      let templateUi = document.querySelector("#templateUi")

      let pice =document.querySelector(".pice").classList
      let main = document.querySelector("#main");
      let input = document.querySelector("#input");
      let addBtn = document.querySelector("#addBtn");
      let hide = document.getElementById("hide");
      let dd = document.querySelector("#dd");
      let listItem =document.querySelectorAll(".listItem")
      let checkitemlist = document.querySelectorAll(".listItem").length
      let box = document.querySelector(".check");
      let editbtn = document.querySelector(".edit-btn");

      let totalCount = document.querySelector("#totalCount");
      let count = document.querySelector("#count");
      let lists = document.querySelector("#lists");
      let text = document.querySelector(".textthrough");


let cloneUi = templateUi.content.cloneNode(true) // clone ui with template html




      const createEl = (text) => {



        let div = document.createElement("div");
        div=cloneUi
        div.querySelector('.textthrough').textContent=text
//         div.innerHTML = `
//        <div  class="check-list listItem p-3 flex justify-between mb-3 mt-5 border border-black items-center">
//     <div class="flex gap-2">
//         <input class="check" value="w-6 h-6" type="checkbox">
//         <label class="textthrough " for="">${text}</label>
//       </div>

//      <div class="flex gap-3 ">
//          <button class="edit-btn border border-zinc-700 p-2"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4  pointer-events-none">
//             <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
//           </svg>
//           </button>
//          <button class="deleBtn border border-zinc-700 p-2"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 pointer-events-none ">
//             <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
//           </svg>
//           </button>

//      </div>


     
// </div>
       
//        `;

        return div;
      };
  

      function add() {
        // hide.classList.add("hidden")
        document.querySelector(".pice").classList.add("hidden")
        dd.append(createEl(input.value));


        document.querySelector(".check").addEventListener("change", () => {
          // document
          //   .querySelector(".textthrough")
          //   .classList.toggle("line-through");
        //  console.log( document.querySelector(".check"));
        document.querySelector(".check").nextElementSibling.classList.toggle("line-through")
        totalCount.innerHTML=checkList()
        });
        // count.innerHTML=parseInt(count.innerHTML)+1
        count.innerHTML = counter();
        input.value = null;

        const deleBtn = document.querySelector(".deleBtn");

        deleBtn.addEventListener("click", (x) => {
          //  if(confirm("Do you want to dele")){
          //   div.remove()
          //  }
          // confirm("Do you want to dele")  && dd.remove()
          // count.innerHTML=parseInt(count.innerHTML)-1
          // console.log(x.target.closest(".listItem"));
          // console.log(x.target.parentElement.parentElement.parentElement);
          let list = x.target.closest(".listItem"); // parentsကို select လုပ်ခြင်း
          // removeEventListener("animationend",removelist) // clear memory in background
          list.remove();
          count.innerHTML = counter();
          
        });

        

        document.querySelector(".edit-btn").addEventListener("click", () => {
          let input = document.createElement("input");
          input.className =
            "second border border-zinc-700 px-2 focus-visible:outline-none";

          // input.value=text.innerText
          // console.log(text.innerHTML);
          document.querySelector(".check").nextElementSibling.after(input)
          document.querySelector(".check").nextElementSibling.classList.add("hidden")
          input.value = document.querySelector(".check").nextElementSibling.textContent
          
          let second = document.querySelector(".second")
          second.addEventListener("blur",() => {
            document.querySelector(".check").nextElementSibling.classList.remove("hidden")
            document.querySelector(".check").nextElementSibling.textContent = second.value
            second.classList.add("hidden")
            console.log(second.value);
})
        });
      }


      addBtn.addEventListener("click", add);

      const countDoneList = () => {
        return document.querySelectorAll(".listItem .check:checked")
      }

      const counter = () => {
        if(document.querySelectorAll(".listItem").length===0){
    document.querySelector(".pice").classList.remove("hidden")
  } 

        return document.querySelectorAll(".check-list").length;
      };

      const checkList= () => {
return document.querySelectorAll(".listItem .check:checked").length
      }

      input.addEventListener("keyup", (x) => x.key === "Enter" && add());


  //  main.addEventListener("click",(x) =>{
  //   console.log(x.target);
  //  } )
    </script>
  </body>
</html>
